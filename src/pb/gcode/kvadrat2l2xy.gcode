; === TEST SQUARE 1x1m ===
; Смещение маркера: 0.045 м
; Задача: Проверить смешанный режим откатов (X/Y и L) с отрицательной скоростью.

; === СТАРТ ===
; ЦВ(0,0), Маркер(0.045, 0)
M5 T1000
G1 A0.000 F0.05
G2 L0.045 F-0.10 ; Откат в старт. ЦВ(-0.045, 0). Маркер(0,0)

; ==========================================================
; СТОРОНА 1: НИЗ (0,0 -> 1,0)
; ==========================================================
M3 T1000
; Едем к X=1.0. Останавливаемся за 0.045 до конца.
G2 X0.955 Y0.000 F0.10 

; --- УГОЛ 1: ОТКАТ ПО КООРДИНАТАМ (X, Y) ---
M5 T1000
G2 L0.045 F0.10  ; ЦВ доезжает в вершину (1.0, 0.0)
G4 P500
G1 A90.000 F0.05 ; Поворот ВВЕРХ
G4 P500
; ТЕСТ КООРДИНАТ: Мы смотрим вверх (90). Нам нужно сдать назад.
; Значит Y должен уменьшиться на 0.045. X не меняется.
; Цель ЦВ: (1.0, -0.045)
G2 X1.000 Y-0.045 F-0.10 ; <--- ОТКАТ ПО КООРДИНАТАМ

; ==========================================================
; СТОРОНА 2: ПРАВО (1,0 -> 1,1)
; ==========================================================
M3 T1000
; Едем к Y=1.0. Останавливаемся за 0.045.
G2 X1.000 Y0.955 F0.10

; --- УГОЛ 2: ОТКАТ ПО КООРДИНАТАМ (X, Y) ---
M5 T1000
G2 L0.045 F0.10  ; ЦВ доезжает в вершину (1.0, 1.0)
G4 P500
G1 A180.000 F0.05 ; Поворот ВЛЕВО
G4 P500
; ТЕСТ КООРДИНАТ: Мы смотрим влево (180). Нам нужно сдать назад (вправо).
; Значит X должен увеличиться на 0.045. Y не меняется.
; Цель ЦВ: (1.045, 1.0)
G2 X1.045 Y1.000 F-0.10 ; <--- ОТКАТ ПО КООРДИНАТАМ

; ==========================================================
; СТОРОНА 3: ВЕРХ (1,1 -> 0,1)
; ==========================================================
M3 T1000
; Едем к X=0.0. Останавливаемся за 0.045 (справа от нуля).
; Цель ЦВ: (0.045, 1.0)
G2 X0.045 Y1.000 F0.10

; --- УГОЛ 3: ОТКАТ ПО ДЛИНЕ (L) ---
M5 T1000
G2 L0.045 F0.10  ; ЦВ доезжает в вершину (0.0, 1.0)
G4 P500
G1 A-90.000 F0.05 ; Поворот ВНИЗ
G4 P500
; ТЕСТ ДЛИНЫ: Просто едем назад на 4.5 см.
G2 L0.045 F-0.10 ; <--- ОТКАТ ПО ДЛИНЕ

; ==========================================================
; СТОРОНА 4: ЛЕВО (0,1 -> 0,0)
; ==========================================================
M3 T1000
; Едем к Y=0.0. Останавливаемся за 0.045 (выше нуля).
; Цель ЦВ: (0.0, 0.045)
G2 X0.000 Y0.045 F0.10

; --- УГОЛ 4: ОТКАТ ПО ДЛИНЕ (L) ---
M5 T1000
G2 L0.045 F0.10  ; ЦВ доезжает в вершину (0.0, 0.0)
G4 P500
G1 A0.000 F0.05 ; Поворот ВПРАВО (исходное)
G4 P500
; ТЕСТ ДЛИНЫ: Просто едем назад.
G2 L0.045 F-0.10 ; <--- ОТКАТ ПО ДЛИНЕ

; === КОНЕЦ: Возврат в исходное состояние (-0.045, 0) ===