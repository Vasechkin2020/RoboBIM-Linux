; === V 5.1: КОНВЕРТ 2x1 (КООРДИНАТЫ X/Y + БЕЗОПАСНЫЙ ОТКАТ) ===
; Смещение маркера: 0.045 м
; Стратегия: Рисуем координатой -> Доезжаем в вершину координатой -> Поворот -> Откат через L

; === СТАРТ: Подготовка ===
M5 T1000
G1 A0.000 F0.05
; Откат в стартовую позицию BL
G2 L0.045 F-0.10 ; ЦВ теперь в (-0.045, 0.0). Маркер в (0,0).

; === 1. BL -> BR (Низ) ===
M3 T1000
; Едем к BR(2,0), но останавливаемся за 0.045 до него.
; X = 2.0 - 0.045 = 1.955
G2 X1.955 Y0.000 F0.10

; --- УГОЛ BR (2,0) ---
M5 T1000
G2 X2.000 Y0.000 F0.10 ; Доезжаем центром точно в вершину BR
G4 P200
G1 A90.000 F0.05 ; Поворот
G4 P200
G2 L0.045 F-0.10 ; Откат назад (безопасный метод)

; === 2. BR -> TR (Право) ===
M3 T1000
; Едем к TR(2,1), останавливаемся за 0.045 (по Y)
; Y = 1.0 - 0.045 = 0.955
G2 X2.000 Y0.955 F0.10

; --- УГОЛ TR (2,1) ---
M5 T1000
G2 X2.000 Y1.000 F0.10 ; Доезжаем центром точно в вершину TR
G4 P200
G1 A206.565 F0.05 ; Поворот на диагональ
G4 P200
G2 L0.045 F-0.10 ; Откат назад

; === 3. TR -> BL (Диагональ 1) ===
M3 T1000
; Едем к BL(0,0), останавливаемся за 0.045
; Вектор угла 206.565: cos=-0.894, sin=-0.447
; X = 0.0 - (-0.040) = 0.040
; Y = 0.0 - (-0.020) = 0.020
G2 X0.040 Y0.020 F0.10

; --- УГОЛ BL (0,0) ---
M5 T1000
G2 X0.000 Y0.000 F0.10 ; Доезжаем центром точно в вершину BL
G4 P200
G1 A90.000 F0.05 ; Поворот вверх
G4 P200
G2 L0.045 F-0.10 ; Откат назад

; === 4. BL -> TL (Лево) ===
M3 T1000
; Едем к TL(0,1), останавливаемся за 0.045
; Y = 1.0 - 0.045 = 0.955
G2 X0.000 Y0.955 F0.10

; --- УГОЛ TL (0,1) ---
M5 T1000
G2 X0.000 Y1.000 F0.10 ; Доезжаем центром точно в вершину TL
G4 P200
G1 A0.000 F0.05 ; Поворот вправо
G4 P200
G2 L0.045 F-0.10 ; Откат назад

; === 5. TL -> TR (Верх) ===
M3 T1000
; Едем к TR(2,1), останавливаемся за 0.045 (по X)
; X = 2.0 - 0.045 = 1.955
G2 X1.955 Y1.000 F0.10

; --- УГОЛ TR (2,1) ---
M5 T1000
G2 X2.000 Y1.000 F0.10 ; Доезжаем центром точно в вершину TR
G4 P200
G1 A135.000 F0.05 ; Поворот на клапан
G4 P200
G2 L0.045 F-0.10 ; Откат назад

; === 6. TR -> Apex (Клапан Право) ===
M3 T1000
; Едем к Apex(1,2), останавливаемся за 0.045
; Вектор 135: cos=-0.707, sin=0.707
; X = 1.0 - (-0.032) = 1.032
; Y = 2.0 - (0.032) = 1.968
G2 X1.032 Y1.968 F0.10

; --- УГОЛ Apex (1,2) ---
M5 T1000
G2 X1.000 Y2.000 F0.10 ; Доезжаем центром точно в вершину Apex
G4 P200
G1 A225.000 F0.05 ; Поворот вниз
G4 P200
G2 L0.045 F-0.10 ; Откат назад

; === 7. Apex -> TL (Клапан Лево) ===
M3 T1000
; Едем к TL(0,1), останавливаемся за 0.045
; Вектор 225: cos=-0.707, sin=-0.707
; X = 0.0 - (-0.032) = 0.032
; Y = 1.0 - (-0.032) = 1.032
G2 X0.032 Y1.032 F0.10

; --- УГОЛ TL (0,1) ---
M5 T1000
G2 X0.000 Y1.000 F0.10 ; Доезжаем центром точно в вершину TL
G4 P200
G1 A333.435 F0.05 ; Поворот на диагональ
G4 P200
G2 L0.045 F-0.10 ; Откат назад

; === 8. TL -> BR (Диагональ 2) ===
M3 T1000
; Едем к BR(2,0), останавливаемся за 0.045
; Вектор 333.435: cos=0.894, sin=-0.447
; X = 2.0 - (0.040) = 1.960
; Y = 0.0 - (-0.020) = 0.020
G2 X1.960 Y0.020 F0.10

; --- ВОЗВРАТ ДОМОЙ ---
M5 T1000
G2 X2.000 Y0.000 F0.10 ; Доезжаем центром в BR
G4 P200
G1 A180.000 F0.05 ; Разворот влево
G4 P200
G2 L0.045 F-0.10 ; Откат назад (ЦВ в 2.045, 0)

; Едем домой к (0,0), останавливаемся перед точкой
G2 X0.045 Y0.000 F0.10

; Финальная парковка
G2 X0.000 Y0.000 F0.10 ; ЦВ в 0,0
G4 P200
G1 A0.000 F0.05 ; Разворот в исходное
G4 P200
G2 L0.045 F-0.10 ; Откат в исходное положение (-0.045, 0)

; === КОНЕЦ ===